{"version":3,"file":"js/469.2a46298a.js","mappings":"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","sources":["webpack://chinese_myths/./src/views/user/UserArticle.vue","webpack://chinese_myths/src/views/user/UserArticle.vue","webpack://chinese_myths/./src/views/user/UserArticle.vue?c221","webpack://chinese_myths/./src/views/user/UserArticle.vue?2407","webpack://chinese_myths/./src/api/services/article.services.js","webpack://chinese_myths/./src/api/services/backstage.services.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"artivle\"},[_c('h2',{staticClass:\"Info-title\"},[_vm._v(\"帖子板块\")]),(_vm.articles)?_c('el-collapse',{attrs:{\"accordion\":\"\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},_vm._l((_vm.articles),function(val,key,pid){return _c('el-collapse-item',{key:pid,attrs:{\"title\":val.title,\"name\":val.title}},[(val.content.length)?_c('div',{staticClass:\"item-content\"},_vm._l((val.content),function(obj){return _c('el-card',{key:obj.pid,staticClass:\"box-card\",attrs:{\"body-style\":{ padding: '0px' },\"shadow\":\"hover\",\"title\":obj.name},nativeOn:{\"click\":function($event){return _vm.toDetail(obj.sid, obj.pid)}}},[(obj.portrait)?_c('img',{attrs:{\"src\":obj.portrait,\"alt\":\"\"}}):_c('div',{staticClass:\"default-image\"}),_c('div',{staticClass:\"article-title\"},[_vm._v(_vm._s(obj.name))]),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.delect(_vm.$store.state.user.uid, obj.pid)}}},[_vm._v(\"取消收藏\")])],1)}),1):_c('div',{staticClass:\"defaultBgI\"})])}),1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"artivle\">\n    <h2 class=\"Info-title\">帖子板块</h2>\n    <el-collapse v-if=\"articles\" v-model=\"activeName\" accordion>\n      <el-collapse-item\n        v-for=\"(val, key, pid) in articles\"\n        :key=\"pid\"\n        :title=\"val.title\"\n        :name=\"val.title\"\n      >\n        <div v-if=\"val.content.length\" class=\"item-content\">\n          <el-card\n            v-for=\"obj of val.content\"\n            :key=\"obj.pid\"\n            :body-style=\"{ padding: '0px' }\"\n            shadow=\"hover\"\n            class=\"box-card\"\n            @click.native=\"toDetail(obj.sid, obj.pid)\"\n            :title=\"obj.name\"\n          >\n            <img v-if=\"obj.portrait\" :src=\"obj.portrait\" alt=\"\" />\n            <div v-else class=\"default-image\"></div>\n            <div class=\"article-title\">{{ obj.name }}</div>\n            <el-button\n              type=\"text\"\n              @click.stop=\"delect($store.state.user.uid, obj.pid)\"\n              >取消收藏</el-button\n            >\n          </el-card>\n        </div>\n        <div v-else class=\"defaultBgI\"></div>\n      </el-collapse-item>\n    </el-collapse>\n  </div>\n</template>\n\n<script>\nimport { Posts } from '@/api/services/article.services';\nimport { noneRecycle } from '@/api/services/backstage.services';\nexport default {\n  data() {\n    return {\n      // 默认展开\n      activeName: '我的收藏',\n      // 文章数据绑定\n      articles: {\n        collected: {\n          title: '我的收藏',\n          content: [],\n        },\n        // issued: {\n        //   title: '我的',\n        //   content: []\n        // }\n      },\n    };\n  },\n  methods: {\n    // 点击帖子跳转\n    toDetail(sid, pid) {\n      console.log(sid, pid);\n      this.$router.push(`/detail?sid=${sid}&pid=${pid}`);\n    },\n    // 渲染数据\n    updatePost(data) {\n      // for (const item in data) {\n      this.articles.collected.content = data;\n      // }\n    },\n    // 获取帖子信息\n    async getArticleObj() {\n      console.log(1);\n      const data = await Posts(this.$store.state.user.uid);\n      console.log(data);\n      if (!data.data) return;\n      // delete data.status;\n      this.updatePost(data.data);\n    },\n    async delect(uid, pid) {\n      // 弹窗询问用户是否删除数据\n      const confirmResult = await this.$confirm(\n        '此操作将取消收藏该帖子, 是否继续?',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning',\n        },\n      ).catch((err) => err);\n\n      // 如果用户确认删除，则返回字符串 confirm\n      // 如果用户取消删除，则返回字符串 cancel\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除');\n      }\n      const res = await noneRecycle(uid, pid);\n      if (res.status === 200) {\n        this.$message.success('取消成功');\n        this.getArticleObj();\n      } else {\n        this.$message.error('取消失败');\n      }\n    },\n  },\n  created() {\n    this.getArticleObj();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\nimg,\n.default-image {\n  width: 220px;\n  height: 200px;\n  background-image: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);\n}\n/deep/ .el-collapse-item__header {\n  font-size: 20px;\n}\n.item-content {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  max-height: 700px;\n  overflow: auto;\n  .box-card {\n    position: relative;\n    flex: 0 1 auto;\n    width: 220px;\n    height: 300px;\n    margin: 20px 0;\n    &:hover .article-title {\n      color: skyblue;\n    }\n    .el-button {\n      position: absolute;\n      bottom: 0;\n      right: 10px;\n    }\n  }\n  img {\n    vertical-align: middle;\n  }\n  .article-title {\n    font-size: 18px;\n    padding-left: 20px;\n    line-height: 100px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n}\n.defaultBgI {\n  width: 256px;\n  height: 256px;\n  margin: 30px auto;\n  background-image: url('@/assets/images/default/default.png');\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserArticle.vue?vue&type=template&id=104595b4&scoped=true&\"\nimport script from \"./UserArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./UserArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserArticle.vue?vue&type=style&index=0&id=104595b4&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"104595b4\",\n  null\n  \n)\n\nexport default component.exports","import { post, get } from '../request'\n// 搜索文章接口\nexport const search = (text) => {\n  return post('/search', { text })\n}\n\n// 获取用户帖子接口\nexport const Posts = (uid) => {\n  return post('/post', { uid })\n}\n\n// 帖子详细接口\nexport const section = (sid, pid, form) => {\n  return post(`section/${sid}/${pid}`, form)\n}\n\n// 板块接口\nexport const plate = (sid, form) => {\n  return post(`section/${sid}`, form)\n}\n\n// 发布帖子接口\nexport const foren = (form) => {\n  return post('foren', form)\n}\n\n// 获取所有板块接口\nexport const getAllSection = (form) => {\n  return post('getAllSection', form)\n}\n\n// 获取文章接口\nexport const sendMessage = (form) => {\n  return post('sendMessage', form)\n}\n","import { post } from '../request'\n// 后台首页数据接口\nexport const getAllData = () => {\n  return post('/getAllData')\n}\n\n// 请求用户数据接口\nexport const getAllUser = (uid, token) => {\n  return post('/getAllUser', {\n    uid,\n    token\n  })\n}\n\n// 添加用户接口\nexport const register = (form) => {\n  return post('/register', form)\n}\n\n// 后台修改用户信息接口\nexport const updataInfoByAdmin = (\n  token,\n  adminId,\n  adminPwd,\n  adminUser,\n  {\n    email,\n    password,\n    phone,\n    role,\n    uid,\n    username\n  }\n) => {\n  return post('updataInfoByAdmin', {\n    email,\n    password,\n    phone,\n    role,\n    uid,\n    username,\n    token,\n    adminId,\n    adminPwd,\n    adminUser\n  })\n}\n\n// 删除用户接口\nexport const deleteUser = (uid) => {\n  return post('/deleteUser', { uid })\n}\n\n// 回收站删除板块接口\nexport const removeFromRecycle = (sid, pid) => {\n  return post('removeFromRecycle', { sid, pid })\n}\n// 回收站得到板块接口\nexport const getAllRecycle = () => {\n  return post('getAllRecycle')\n}\n// 回收恢复帖子接口\nexport const recover = (sid, pid) => {\n  return post('recover', { sid, pid })\n}\n\n// 删除板块接口\nexport const delectSection = (sid) => {\n  return post('delectSection', { sid })\n}\n\n// 添加板块接口\nexport const addSection = (row) => {\n  return post('addSection', row)\n}\n\n// 获取所有板块信息接口\nexport const getAllSection = () => {\n  return post('getAllSections')\n}\n\n// 获取所有帖子息接口\nexport const getAllPost = () => {\n  return post('getAllPost')\n}\n// 帖子修改接口\nexport const updatePost = (row) => {\n  return post('updatePost', row)\n}\n\n// 删除帖子接口\nexport const goToRecycle = (sid, pid) => {\n  return post('goToRecycle', { sid, pid })\n}\n// 取消帖子接口\nexport const noneRecycle = (uid, pid) => {\n  return post('noneRecycle', { uid, pid })\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","_v","articles","attrs","model","value","activeName","callback","$$v","expression","_l","val","key","pid","title","content","length","obj","padding","name","nativeOn","$event","toDetail","sid","portrait","_s","on","stopPropagation","delect","$store","state","user","uid","_e","staticRenderFns","data","collected","methods","console","updatePost","confirmButtonText","cancelButtonText","type","created","component","search","text","post","Posts","plate","form","getAllData","getAllUser","token","register","updataInfoByAdmin","adminId","adminPwd","adminUser","email","password","phone","role","username","deleteUser","delectSection","addSection","row","getAllSection","getAllPost","goToRecycle","noneRecycle"],"sourceRoot":""}