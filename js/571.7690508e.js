"use strict";(self["webpackChunkchinese_myths"]=self["webpackChunkchinese_myths"]||[]).push([[571],{6571:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-password"},[t("h2",{staticClass:"Info-title"},[e._v("修改密码")]),t("div",{staticClass:"tips"},[t("el-tag",{attrs:{type:"warning",effect:"plain"}},[e._v("为了安全，我们强烈建议您选择与其他在线账户不同的独一无二密码。")])],1),t("div",{staticClass:"main"},[t("el-form",{ref:"updatePwdForm",staticClass:"updatePwdForm",attrs:{model:e.updatePwdForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"原始密码",prop:"oldPwd"}},[t("el-input",{model:{value:e.updatePwdForm.oldPwd,callback:function(t){e.$set(e.updatePwdForm,"oldPwd","string"===typeof t?t.trim():t)},expression:"updatePwdForm.oldPwd"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"newPwd"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.updatePwdForm.newPwd,callback:function(t){e.$set(e.updatePwdForm,"newPwd","string"===typeof t?t.trim():t)},expression:"updatePwdForm.newPwd"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.updatePwdForm.checkPass,callback:function(t){e.$set(e.updatePwdForm,"checkPass","string"===typeof t?t.trim():t)},expression:"updatePwdForm.checkPass"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"info"},on:{click:e.resetLoginForm}},[e._v("放弃更改")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updatePwd}},[e._v("保存变更")])],1)],1),t("el-divider",{attrs:{direction:"vertical"}}),e._m(0)],1)])},a=[function(){var e=this,t=e._self._c;return t("ul",[t("li",[e._v("您的密码")]),t("li",[e._v("您的密码必须由 7 个或更多字符组成。")]),t("li",[e._v("您的密码必须包含至少 1 位数字")]),t("li",[e._v("您的密码不得含有空格")])])}],o=s(3822),d=s(2104),i={data(){const e=(e,t,s)=>{t||s(new Error("当前密码不能为空")),console.log(this.$store.state.user.password,t),t!==this.$store.state.user.password&&s(new Error("密码错误，请重新输入")),s()},t=(e,t,s)=>{t||s(new Error("密码不能为空")),this.updatePwdForm.checkPass&&this.$refs.updatePwdForm.validateField("checkPass"),s()},s=(e,t,s)=>{t||s(new Error("请再次输入密码")),t!==this.updatePwdForm.newPwd&&s(new Error("两次输入密码不一致!")),s()};return{updatePwdForm:{oldPwd:"",newPwd:"",checkPass:""},rules:{oldPwd:[{validator:e,trigger:"blur"}],newPwd:[{validator:t,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}]}}},computed:{...(0,o.rn)(["user","token"])},methods:{resetLoginForm(){this.$refs.updatePwdForm.resetFields()},updatePwd(){this.$refs.updatePwdForm.validate((async e=>{if(!e)return;const t=await(0,d.wp)(this.user.username,this.updatePwdForm,this.token);if(console.log(t),200!==t.status)return this.$message.error("更换密码失败");this.$message.success(t.msg),this.$store.commit("updatePwd",{user:t.data,token:t.token}),window.localStorage.setItem("token",t.token),this.$refs.updatePwdForm.resetFields()}))}}},l=i,n=s(1001),u=(0,n.Z)(l,r,a,!1,null,"586fa170",null),c=u.exports}}]);
//# sourceMappingURL=571.7690508e.js.map