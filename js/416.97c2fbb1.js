"use strict";(self["webpackChunkchinese_myths"]=self["webpackChunkchinese_myths"]||[]).push([[416],{1416:function(s,e,r){r.r(e),r.d(e,{default:function(){return f}});var t=function(){var s=this,e=s._self._c;return e("div",{staticClass:"sign-container"},[e("div",{staticClass:"background"}),e("div",{staticClass:"sign_box"},[e("el-form",[e("sign-form")],1)],1)])},a=[],i=function(){var s=this,e=s._self._c;return e("el-form",{ref:"signFormRef",staticClass:"signForm",attrs:{model:s.signForm,rules:s.SignRules,"label-width":"100px"}},[e("el-form-item",{staticClass:"avatar-box",attrs:{prop:"portrait"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:3000/getImgPath","show-file-list":!1,multiple:!1,limit:1,"auto-upload":!0,"on-success":s.handle_success,accept:"image/png, image/jpg, image/jpeg"},model:{value:s.signForm.portrait,callback:function(e){s.$set(s.signForm,"portrait",e)},expression:"signForm.portrait"}},[e("div",{on:{click:s.showImg}},[this.signForm.portrait?e("img",{staticClass:"avatar",attrs:{src:this.signForm.portrait}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.showChooseAvatar,expression:"showChooseAvatar"}]},[e("ul",s._l(s.fileList,(function(r){return e("li",{key:r.id},[e("img",{staticClass:"avatar",attrs:{src:r.portrait},on:{click:function(e){return s.chooseImg(r.portrait)}}})])})),0)])])],1),e("el-form-item",{staticClass:"lable",attrs:{label:"用户名：",prop:"username"}},[e("el-input",{attrs:{"prefix-icon":"iconfont icon-dengluyemianyonghuming",clearable:""},model:{value:s.signForm.username,callback:function(e){s.$set(s.signForm,"username",e)},expression:"signForm.username"}})],1),e("el-form-item",{staticClass:"lable",attrs:{label:"电话：",prop:"phone"}},[e("el-input",{attrs:{"prefix-icon":"iconfont icon-shoujihao1",clearable:""},model:{value:s.signForm.phone,callback:function(e){s.$set(s.signForm,"phone",e)},expression:"signForm.phone"}})],1),e("el-form-item",{staticClass:"lable",attrs:{label:"邮箱： ",prop:"email"}},[e("el-input",{attrs:{"prefix-icon":"iconfont icon-youxiang2",clearable:""},model:{value:s.signForm.email,callback:function(e){s.$set(s.signForm,"email",e)},expression:"signForm.email"}})],1),e("el-form-item",{staticClass:"lable",attrs:{label:"设置密码：",prop:"password"}},[e("el-input",{attrs:{"prefix-icon":"iconfont icon-mima",type:"password",clearable:""},model:{value:s.signForm.password,callback:function(e){s.$set(s.signForm,"password",e)},expression:"signForm.password"}})],1),e("el-form-item",{staticClass:"lable",attrs:{label:"确认密码：",prop:"checkpassword"}},[e("el-input",{attrs:{"prefix-icon":"iconfont icon-mima1",type:"password",clearable:""},model:{value:s.signForm.checkpassword,callback:function(e){s.$set(s.signForm,"checkpassword",e)},expression:"signForm.checkpassword"}})],1),e("el-form-item",{staticClass:"btns"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return s.signUP("signForm")}}},[s._v("注册")]),e("p",{staticClass:"login",on:{click:function(e){return s.login("signForm")}}},[s._v("已有账号？立即登录")])],1)],1)},o=[],n=(r(7658),r(2104)),l={name:"Sign-form",data(){const s=(s,e,r)=>{""===e?r(new Error("请输入密码")):(""!==this.signForm.checkpassword&&this.$refs.signFormRef.validateField("checkpassword"),r())},e=(s,e,r)=>{""===e?r(new Error("请再次输入密码")):e!==this.signForm.password?r(new Error("两次输入密码不一致!")):r()},r=(s,e,r)=>{if(e){const s=/^1[3|4|5|6|7|8][0-9]\d{8}$/;if(!s.test(e))return r(new Error("手机号格式有误"));r()}else r(new Error("请输入手机号"))};return{imgVisible:!1,showChooseAvatar:!0,fileList:[{id:"1",portrait:"https://img1.baidu.com/it/u=1659441821,1293635445&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500"}],signForm:{username:"",phone:"",email:"",password:"",portrait:"",checkpassword:""},SignRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:4,max:14,message:"长度在 4 到 14个字符",trigger:"blur"}],phone:[{required:!0,trigger:"blur"},{validator:r,min:11,message:"手机号格式有误",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{validator:s,required:!0,trigger:"blur"}],checkpassword:[{validator:e,required:!0,trigger:"blur"}]}}},mounted(){},methods:{signUP(){this.$refs.signFormRef.validate((async s=>{if(!s)return;console.log(this.signForm);const e=await(0,n.z2)(this.signForm);if(console.log(e),200!==e.status)return 1062===e.msg.errno?this.$message.warning("用户名已存在，请更改！"):40001===e.status?this.$message.warning("服务器错误，请稍候再试！"):this.$message.error("请按要求填写信息！");this.$message.success("注册成功！"),this.$router.push("login")}))},chooseImg(s){localStorage.setItem("avatar",s),this.signForm.portrait=localStorage.getItem("avatar"),this.showChooseAvatar=!1},showImg(){this.showChooseAvatar=!1},handle_success(s){console.log(s,2),200===s.status?(this.$message.success("图片上传成功"),this.signForm.portrait=s.data.url):this.$message.success("图片上传失败")},login(){this.$router.push("login")}}},c=l,m=r(1001),g=(0,m.Z)(c,i,o,!1,null,"562bfaa9",null),u=g.exports,p={name:"Sign-Up",components:{SignForm:u}},h=p,d=(0,m.Z)(h,t,a,!1,null,"152ab21f",null),f=d.exports}}]);
//# sourceMappingURL=416.97c2fbb1.js.map